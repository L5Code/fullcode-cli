# fullcode-cli

![](https://img.shields.io/badge/version-0.4.1-green)

ä¸€ä¸ªå¸®åŠ©ä½ å¿«é€Ÿå¼€å‘å’Œæ­å»ºã€å…¨æ ˆé¡¹ç›®ã€‘çš„ cliï¼Œè§£æ”¾åŒæ‰‹ï¼

> è„šæ‰‹æ¶é€šå¸¸æ˜¯ä»£ç ç¼–å†™çš„ç¬¬ä¸€ä¸ªæ ‡å‡†åŒ–æ–¹æ¡ˆï¼Œå®ƒå‘Šè¯‰æ‰€æœ‰å‚ä¸åŒä¸€ä¸ªé¡¹ç›®çš„äººä»¬å¦‚ä½•åˆç†åˆ’åˆ†é¡¹ç›®æ¨¡å—ä»¥åŠå¦‚ä½•ä¸“æ³¨äºåŠŸèƒ½å®ç°ã€‚ æ ‡å‡†åŒ–çš„è„šæ‰‹æ¶å¯ä»¥ä½¿å›¢é˜Ÿåä½œå¼€å‘å’Œå¼€å§‹ç¬¬äºŒä¸ªç›¸åŒæŠ€æœ¯æ ˆçš„é¡¹ç›®æ›´åŠ å®¹æ˜“ã€‚å‡ºè‰²å¿«é€Ÿçš„é¡¹ç›®è¿›åº¦éœ€è¦ä¸€ä¸ªæ›´æ˜“äºä½¿ç”¨çš„è„šæ‰‹æ¶å·¥å…·ã€‚

## ç‰¹å¾

- ä½¿ç”¨ç®€å•ï¼Œä¸ºæ–¹ä¾¿å¿«é€Ÿå¼€å‘ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œæä¾›å‘½ä»¤è¡Œä¸€è¡Œå¼æ„å»ºã€‚
- é«˜è‡ªåŠ¨åŒ–ï¼Œè‡ªåŠ¨æ‹‰å–æ¨¡æ¿ï¼Œè‡ªåŠ¨ä¾èµ–ï¼Œè‡ªåŠ¨éƒ¨ç½²ã€‚
- æ¡†æ¶ä¸°å¯Œï¼Œæä¾›äº†ç»å¤§å¤šæ•° nodejs å…¨æ ˆå¼€å‘ä¸­éœ€è¦ç”¨è¦çš„æ¡†æ¶ç»„ä»¶ã€‚**(ç›®å‰æ”¯æŒ Koa, Vue, åæœŸä¼šæ”¯æŒ Express, å‰ç«¯æ¡†æ¶ React è€ƒè™‘ä¸­~)**
- å…¼å®¹æ€§é«˜ï¼Œæ”¯æŒ windows, linux, macosã€‚

## ğŸ¨ æ¼”ç¤º

## èƒŒæ™¯

æœ¬é¡¹ç›®çš„å¼€å§‹æ˜¯å› ä¸ºè®¸å¤šç›¸åŒä½¿ç”¨æŠ€æœ¯æ ˆçš„é¡¹ç›®å¹¶æ²¡æœ‰å½¢æˆç›¸åº”çš„æŠ€æœ¯è§„èŒƒï¼Œ è¿™å°±å¯¼è‡´äº†æ¯æ¬¡æ–°å¼€é¡¹ç›®æ—¶å¾ˆå¤šåˆšæ¥è§¦çš„æ–°å¼€å‘è€…ä¼šå¯¹é¡¹ç›®çš„ç»“æ„è§„åˆ’å¾ˆæ˜¯èŒ«ç„¶ï¼Œ ç”šè‡³å‡ºç°æ‰€æœ‰ä»£ç å…¨éƒ½å†™åœ¨å…¥å£æ–‡ä»¶ä¹‹ä¸­ã€‚

è¿™æ ·çš„é¡¹ç›®æ•´åˆèµ·æ¥å°†æ˜¯ååˆ†å›°éš¾ï¼Œè€Œä¸”å¾ˆéš¾ç»´æŠ¤å®ƒã€‚ é€šè¿‡ä»¥è„šæ‰‹æ¶å·¥å…·å°†å‰æœŸä»£ç å·¥ä½œåŠ ä»¥è§„èŒƒï¼Œè§£å†³é¡¹ç›®åä½œäººå‘˜æ°´å¹³å‚å·®ä¸é½çš„é—®é¢˜ï¼Œå‡è½»é¡¹ç›®äº¤ä»˜çš„è´Ÿæ‹…ï¼Œ ä¹Ÿèƒ½å‡å°‘èŠ±è´¹åœ¨æ‹…å¿ƒåˆå§‹ä»£ç æ˜¯å¦è‰¯å¥½çš„æ—¶é—´ã€‚

æœ¬é¡¹ç›®çš„ç›®æ ‡æ˜¯ï¼š

1. å®šä¹‰å„ä¸ªæ¡†æ¶æ˜ç¡®çš„é¡¹ç›®åˆ’åˆ†ã€‚ç”¨äºç»Ÿä¸€å…¬å¸å†…éƒ¨å› äººè€Œå¼‚çš„é¡¹ç›®ç»“æ„ã€‚
2. é¡¹ç›®æ¨¡æ¿ç”Ÿæˆå™¨ã€‚è¯¥æ¨¡æ¿å¯ä»¥å¿«é€Ÿå¸®åŠ©å¼€å‘äººå‘˜è¿›è¡Œäº§å“åŠŸèƒ½å¼€å‘ã€‚
3. æ¨¡å—è‡ªåŠ¨æ³¨å†Œã€‚è‡ªåŠ¨åŒ–æ‰€æœ‰èƒ½è‡ªåŠ¨åŒ–çš„æ ‡å‡†ä»£ç ã€‚

## ğŸ› ï¸ å¦‚ä½•ä½¿ç”¨ï¼Ÿ

> åœ¨å†³å®šä½¿ç”¨ fullcode-cli å‰ï¼Œå¿…é¡»æ˜ç¡®çš„ä¸€ç‚¹æ˜¯ï¼Œ
> æ­¤æ¡†æ¶æš‚æ—¶ç»™å‡ºçš„æ˜¯ä¸€æ•´å¥—ç¬¦åˆä½œè€…å°±èŒæŸå…¬å¸æ—¶ï¼ŒåŸºäºæŸå…¬å¸ç‰¹è‰²è€Œè®¾è®¡çš„æ•´ä½“é¡¹ç›®è§£å†³æ–¹æ¡ˆï¼Œ
> å¦‚æœä½ æƒ³è®©å…¶ä»£æ›¿ä½ å¹³æ—¶å¼€å‘å·¥ä½œçš„è„šæ‰‹æ¶æ­å»ºè¿‡ç¨‹ï¼Œé‚£éœ€è¦ç‰¹å®šä¿®æ”¹éƒ¨åˆ† config é…ç½®æ¥è¿åˆä½ ç›¸å…³çš„ä»£ç é£æ ¼å’Œç›®å½•é£æ ¼ã€‚
> å¦‚æœä½ æ˜¯æƒ³å­¦ä¹ å¦‚ä½•æ‹¥æœ‰ä¸€å¥—å¯ä»¥å®šåˆ¶çš„ã€ç»Ÿä¸€çš„é¡¹ç›®å¼€å‘è§£å†³æ–¹æ¡ˆçš„è¯ï¼Œé‚£ä¹ˆä½ å°±ç»§ç»­å¾€ä¸‹çœ‹å§ï¼

è¯¥é¡¹ç›®ä½¿ç”¨[node.js](https://nodejs.org/en) ã€‚è¯·ç¡®è®¤æœ¬åœ°æ˜¯å¦å®‰è£…ã€‚

`npm install fullcode-cli -g`

## å‘½ä»¤è¡Œå‚æ•°è¯´æ˜:`fullcode --help`

```shell
Usage: fullcode [options] [command]

Options:
  -V, --version          output the version number
  -d, --dest <dest>      Set the project directory
  -h, --help             display help for command

Commands:
  create                 create a new project into a folder
  add                    add a new template into your project
  add-koa-router <name>  add router into your project, e.g. fullcode add-koa-router orders [-d routes]
  add-vue-cpn <name>     add vue component, e.g. fullcode add-vue-cpn HelloWorld [-d src/components]
  add-vue-page <name>    add vue page and router config, e.g. fullcode add-vue-page Home [-d src/pages]
  add-vue-store <name>   add vue store, e.g. fullcode add-vue-store Home [-d src/store/modules]
  help [command]         display help for command
```

## åŠŸèƒ½ç®€ä»‹

ç›®å‰ fullcode ä»…å¼€æ”¾ä»¥ä¸‹åŠŸèƒ½ï¼š

- é’ˆå¯¹ Koa è„šæ‰‹æ¶æä¾›ï¼š
  - åˆ›å»º router è·¯ç”±
- é’ˆå¯¹ Vue è„šæ‰‹æ¶æä¾›ï¼š
  - åˆ›å»º Vue Component
  - åˆ›å»º Vue Page, å¹¶é…ç½® router
  - åˆ›å»º Vuex å­æ¨¡å—

### åˆ›å»ºé¡¹ç›®

```javascript
// äº¤äº’æ¨¡å¼å‘½ä»¤
$ fullcode create

// 1. è‡ªåŠ¨æ‹‰å–é¡¹ç›®æ¨¡æ¿
// 2. å®‰è£…é¡¹ç›®ä¾èµ–
// 3. è‡ªåŠ¨å¯åŠ¨é¡¹ç›®
```

### åˆ›å»ºç›¸åº”ç»„ä»¶

```javascript
// äº¤äº’æ¨¡å¼å‘½ä»¤
$ fullcode add

// åˆ›å»º koa router ï¼Œrouterçš„åç§°ä¸ºhelloï¼Œé»˜è®¤ä¼šæ”¾åˆ°routesç›®å½•ä¸­
$ fullcode add-koa-router hello
// åˆ›å»º koa router ï¼Œrouterçš„åç§°ä¸ºhelloï¼Œå­˜æ”¾åœ¨routesç›®å½•ä¸‹
$ fullcode add-koa-router hello -d routes

// åˆ›å»º vue component ï¼Œcomponentçš„åç§°ä¸ºhelloï¼Œé»˜è®¤å­˜æ”¾åœ¨src/componentsç›®å½•ä¸‹
$ fullcode add-vue-cpn hello
// åˆ›å»º vue component ï¼Œcomponentçš„åç§°ä¸ºhelloï¼Œå­˜æ”¾åœ¨src/componentsç›®å½•ä¸‹
$ fullcode add-vue-cpn hello -d src/components

// åˆ›å»º vue page å’Œç›¸åº” router ï¼Œpageçš„åç§°ä¸ºhelloï¼Œé»˜è®¤ä¼šåœ¨src/pagesç›®å½•ä¸‹åˆ›å»ºhome/router.js å’Œ home/Home.vue
$ fullcode add-vue-page hello
// åˆ›å»º vue page å’Œç›¸åº” router ï¼Œpageçš„åç§°ä¸ºhelloï¼Œä¼šåœ¨src/pagesç›®å½•ä¸‹åˆ›å»º/home/router.js å’Œ /home/Home.vue
$ fullcode add-vue-page hello -d src/pages

// åˆ›å»º vue store ï¼Œstoreçš„åç§°ä¸ºhelloï¼Œé»˜è®¤ä¼šåœ¨src/store/modulesç›®å½•ä¸‹åˆ›å»º home/index.js å’Œ types.js
$ fullcode add-vue-store hello
// åˆ›å»º vue store ï¼Œstoreçš„åç§°ä¸ºhelloï¼Œä¼šåœ¨src/store/modulesç›®å½•ä¸‹åˆ›å»º home/index.js å’Œ types.js
$ fullcode add-vue-store hello -d src/store/modules
```

## é¡¹ç›®ç®€ä»‹ï¼š

### Vue é¡¹ç›®æ¨¡å—å·²ç»å¸®ä½ é…ç½®ï¼š

- å¸¸ç”¨çš„ç›®å½•ç»“æ„ï¼ˆä½ å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹ï¼‰

- vue.config.jsï¼ˆå…¶ä¸­é…ç½®äº†åˆ«åï¼Œä½ å¯ä»¥è‡ªè¡Œä¿®æ”¹å’Œé…ç½®æ›´å¤šï¼‰

- axiosï¼ˆç½‘ç»œè¯·æ±‚ axios çš„å®‰è£…ä»¥åŠäºŒæ¬¡å°è£…ï¼‰

- vue-routerï¼ˆrouter çš„å®‰è£…å’Œé…ç½®ï¼ŒåŠ¨æ€åŠ è½½è·¯ç”±ï¼‰

  ä½¿ç”¨ fullcode åˆ›å»º page åï¼Œè·¯ç”±ä¼šè‡ªåŠ¨æ³¨å†Œï¼Œæ— éœ€æ‰‹åŠ¨æ³¨å†Œã€‚

  **ä¸ºä»€ä¹ˆè¦åœ¨åˆ›å»º page æ—¶ä¼šè¦åˆ›å»º `router.js` ? åŠ¨æ€è·¯ç”±åŠ è½½æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ**

  Vue é¡¹ç›®ä¸­ `src/router/index.js` ä¼šè‡ªåŠ¨åŠ è½½ pages ç›®å½•ä¸‹çš„è·¯ç”±åˆ° routes é…ç½®ä¸­ï¼Œä¸éœ€è¦æ‰‹åŠ¨é…ç½®ï¼ˆå½“ç„¶å¦‚æœä½ ä¸ä½¿ç”¨æˆ‘æä¾›çš„é…ç½®æ–‡ä»¶å¤¹ï¼Œè¦è‡ªå®šä¹‰é…ç½®æ–‡ä»¶å¤¹åˆ™éœ€è¦æ‰‹åŠ¨é…ç½®ï¼‰

  `src/router/index.js` å·²å®Œæˆä»¥ä¸‹è‡ªåŠ¨è·¯ç”±æ³¨å†Œï¼š

  ```js
  // åŠ¨æ€åŠ è½½pagesä¸­æ‰€æœ‰çš„è·¯ç”±æ–‡ä»¶
  const files = require.context('@/pages', true, /router\.js$/)
  const routes = files.keys().map((key) => {
    const page = require('@/pages' + key.replace('.', ''))
    return page.default
  })
  ```

- vuexï¼ˆvuex çš„å®‰è£…å’Œé…ç½®ï¼ŒåŠ¨æ€åŠ è½½å­æ¨¡å—ï¼‰

  ä½¿ç”¨ fullcode åˆ›å»ºå¥½ vuex å­æ¨¡å—åï¼Œä¹Ÿä¸å†éœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œé¡¹ç›®ä¼šè‡ªåŠ¨åŠ¨æ€åŠ è½½ï¼š

  ```js
  // åŠ¨æ€åŠ è½½modules
  const modules = {}
  const files = require.context('./', true, /index\.js$/)
  files
    .keys()
    .filter((key) => {
      if (key === './index.js') return false
      return true
    })
    .map((key) => {
      // è·å–åå­—
      const modulePath = key.replace('./modules/', '')
      const moduleName = modulePath.replace('/index.js', '')
      const module = require(`${key}`)

      modules[`${moduleName}`] = module.default
    })
  ```

### Koa2 é¡¹ç›®æ¨¡å—å·²ç»å¸®ä½ é…ç½®ï¼š

- å¸¸ç”¨çš„ç›®å½•ç»“æ„ï¼ˆä½ å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹ï¼‰

  ```
  â”œâ”€â”€ bin                        # é¡¹ç›®åˆå§‹åŒ–è„šæœ¬
  â”œâ”€â”€ cache                      # æ•°æ®ç¼“å­˜
  â”‚   â”‚â”€â”€ api                    # ç¼“å­˜å­˜å‚¨ç›®å½•
  â”‚   â””â”€â”€ index.js               # æ•°æ®ç¼“å­˜å®ç°ä»£ç 
  â”œâ”€â”€ config                     # é¡¹ç›®é…ç½®æ–‡ä»¶å¤¹
  â”‚   â”‚â”€â”€ database.config.js     # æ•°æ®åº“é…ç½®æ–‡ä»¶
  â”‚   â”‚â”€â”€ table.config.js        # æ•°æ®è¡¨é…ç½®æ–‡ä»¶
  â”‚   â””â”€â”€ index.js               # åŸºæœ¬é…ç½®æ–‡ä»¶
  â”œâ”€â”€ database                   # é™æ€èµ„æº
  â”‚   â”‚â”€â”€ database.function.js   # æ•°æ®åº“è¿æ¥æ–¹æ³•å°è£…æ–‡ä»¶
  â”‚   â””â”€â”€ db.js                  # æ•°æ®åº“è¿æ¥æ–‡ä»¶
  â”œâ”€â”€ middleware                 # ä¸­é—´ä»¶
  â”œâ”€â”€ public                     # å…¬å…±é™æ€èµ„æºæ–‡ä»¶
  â”œâ”€â”€ routes                     # åŠ¨æ€è·¯ç”±æ–‡ä»¶
  â”œâ”€â”€ routesFunc                 # åŠ¨æ€è·¯ç”±çš„ä¸“å±æ–¹æ³•ï¼Œä¸é€šç”¨
  â”œâ”€â”€ timedtask                  # å®šæ—¶ä»»åŠ¡
  â”œâ”€â”€ utils                      # å…¬å…±æ–¹æ³•
  â”‚   â”‚â”€â”€ dbMiddleware.js        # è®¿é—®æ•°æ®åº“æ–¹æ³•
  â”‚   â”‚â”€â”€ error.js               # é”™è¯¯å›è°ƒæ–¹æ³•
  â”‚   â””â”€â”€ index.js               # åŸºæœ¬é€šç”¨æ–¹æ³•
  â”œâ”€â”€ views                      # æ¥å£å¹³å°ç½‘ç«™
  â”œâ”€â”€ app.js                     # å…¥å£æ–‡ä»¶
  â”œâ”€â”€ .eslintrc.js               # eslint é…ç½®é¡¹
  â”œâ”€â”€ pm2.json                   # pm2æœåŠ¡å¯åŠ¨é…ç½®æ–‡ä»¶
  â”œâ”€â”€ package-lock.json          # package-lock.json
  â””â”€â”€ package.json               # package.json
  ```

- koa-routerï¼ˆrouter çš„å®‰è£…å’Œé…ç½®ï¼ŒåŠ¨æ€åŠ è½½è·¯ç”±ï¼‰

  **ä¸ºä»€ä¹ˆ router æ–‡ä»¶ä¸å­˜æ”¾åœ¨ routes æ–‡ä»¶å¤¹ä¸­éœ€è¦è‡ªè¡Œæ³¨å†Œè·¯ç”±ï¼Ÿ**

  æ–‡ä»¶å¤¹ routes ä¸­ä¼šè‡ªåŠ¨åŠ è½½åˆ°è·¯ç”±åˆ°é¡¹ç›®çš„ routes é…ç½®ä¸­ï¼Œï¼ˆå®é™…ä¸Šæ˜¯ä¸€ä¸ªè¯»å–æ–‡ä»¶å¤¹çš„è¿‡ç¨‹ï¼‰ä¸éœ€è¦æ‰‹åŠ¨é…ç½®äº†ï¼ˆå¦‚æœæ˜¯è‡ªå·±é…ç½®çš„æ–‡ä»¶å¤¹éœ€è¦æ‰‹åŠ¨é…ç½®ï¼‰

  routes/index.js ä¸­å·²ç»å®Œæˆå¦‚ä¸‹æ“ä½œï¼š

  ```js
  // åŠ¨æ€åŠ è½½ routes ä¸­æ‰€æœ‰çš„è·¯ç”±æ–‡ä»¶
  for (let item of fs.readdirSync(routesUrl)) {
    let routerName = path.win32.basename(item, '.js')
    routes[routerName] = require(path.resolve(routesUrl, routerName))
  }

  // åŠ¨æ€è·¯ç”±æ˜ å°„
  Object.keys(routes).forEach((key) => {
    app.use(routes[key].routes(), routes[key].allowedMethods())
  })
  ```

## ç›¸å…³è„šæ‰‹æ¶é¡¹ç›®åœ°å€

- [Vue è„šæ‰‹æ¶ ï¼šhttps://github.com/wangxinleo/fullcode-vue-temp](https://github.com/wangxinleo/fullcode-vue-temp)

- [Koa è„šæ‰‹æ¶ ï¼šhttps://github.com/wangxinleo/fullcode-koa-temp](https://github.com/wangxinleo/fullcode-koa-temp)

## æé—®

- [æŠ¥å‘Šé—®é¢˜]()

## ğŸ™ ç‰¹åˆ«é¸£è°¢

## è”ç³»æ–¹å¼

## ğŸ˜ï¸ ç¤¾åŒº

- æ¬¢è¿åŠ å…¥ B3LOG çš„å°ä¼—å¼€æºç¤¾åŒºï¼Œè¯¦æƒ…è¯·çœ‹[è¿™é‡Œ](https://hacpai.com/article/1463025124998)
